# CS2 Trade-Up ç§‘å­¦ç‰ˆè®¡ç®—ç³»ç»Ÿ

ä¸€ä¸ªåŸºäºæµ®æ¼‚ä¼ å¯¼å’ŒæœŸæœ›è®¡ç®—çš„ CS2 ç‚¼é‡‘ï¼ˆTrade-Upï¼‰æŠ•èµ„åˆ†æå·¥å…·ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
python_and_deeplearning/
â”œâ”€â”€ data/                          # å›ºå®šæ•°æ®æ–‡ä»¶å¤¹ï¼ˆå…ƒæ•°æ®ã€æ˜ å°„è¡¨ï¼‰
â”‚   â”œâ”€â”€ cs2_case_items_full.csv   # CS2 ç®±å­ç‰©å“å®Œæ•´æ¸…å•
â”‚   â”œâ”€â”€ skins_meta_complete.csv   # çš®è‚¤æµ®æ¼‚åŒºé—´å…ƒæ•°æ®
â”‚   â”œâ”€â”€ name_mapping.csv          # è‹±æ–‡â†’ä¸­æ–‡åç§°æ˜ å°„è¡¨
â”‚   â””â”€â”€ prices_with_exterior.csv  # ç»Ÿä¸€å¤–è§‚ä»·æ ¼è¡¨ï¼ˆæ¯æ—¥ç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ tools/                         # å·¥å…·è„šæœ¬ï¼ˆéæ¯æ—¥ä½¿ç”¨ï¼‰
â”‚   â”œâ”€â”€ fetch_float_from_github.py       # æŠ“å–æµ®æ¼‚å…ƒæ•°æ®
â”‚   â”œâ”€â”€ generate_cn_name_mapping.py      # ç”Ÿæˆä¸­æ–‡åç§°æ˜ å°„
â”‚   â”œâ”€â”€ generate_best_materials_by_case.py # ç”Ÿæˆæœ€ä½³ä¸»æ–™æ¸…å•
â”‚   â””â”€â”€ connectors_market.py             # å¸‚åœºä»·æ ¼æŠ“å–å™¨æ¨¡å—
â”‚
â”œâ”€â”€ output/                        # è¾“å‡ºæ–‡ä»¶å¤¹ï¼ˆç”Ÿæˆçš„æŠ¥å‘Šï¼‰
â”‚   â”œâ”€â”€ ç§‘å­¦ç‰ˆ_ç›ˆåˆ©TOP100_æŒ‰åˆ©æ¶¦.txt
â”‚   â”œâ”€â”€ ç§‘å­¦ç‰ˆ_ç›ˆåˆ©TOP100_æŒ‰ROI.txt
â”‚   â”œâ”€â”€ ç§‘å­¦ç‰ˆ_äºæŸTOP100_æŒ‰åˆ©æ¶¦.txt
â”‚   â”œâ”€â”€ ç§‘å­¦ç‰ˆ_äºæŸTOP100_æŒ‰ROI.txt
â”‚   â”œâ”€â”€ å›ºå®š_æ¯ç®±æ¯ç‰©å“_å„å¤–è§‚_æœ€ä¼˜ä¸‹çº§.txt
â”‚   â””â”€â”€ æœ€ä½³ä¸»æ–™æ¸…å•_æŒ‰ç®±å­åˆ†ç±».csv/md
â”‚
â”œâ”€â”€ fetch_prices_with_steamdt.py  # â­ æ­¥éª¤1: æŠ“å–ä»·æ ¼æ•°æ®
â”œâ”€â”€ unify_prices.py                # â­ æ­¥éª¤2: ç»Ÿä¸€ä»·æ ¼æ ¼å¼
â”œâ”€â”€ calculate_scientific_plus.py  # â­ æ­¥éª¤3: ç§‘å­¦ç‰ˆè®¡ç®—ï¼ˆä¸»ç¨‹åºï¼‰
â”œâ”€â”€ calculate_scientific.py        # æ—§ç‰ˆè®¡ç®—ï¼ˆå¤‡ç”¨ï¼‰
â”‚
â”œâ”€â”€ æ¯æ—¥æ›´æ–°.bat                    # Windows è‡ªåŠ¨åŒ–è„šæœ¬
â”œâ”€â”€ æ¯æ—¥æ›´æ–°.sh                     # Linux è‡ªåŠ¨åŒ–è„šæœ¬
â””â”€â”€ æ¯æ—¥æ›´æ–°æµç¨‹è¯´æ˜.md             # æµç¨‹æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ¯æ—¥æ›´æ–°ï¼ˆ3 æ­¥è‡ªåŠ¨åŒ–ï¼‰

```bash
# Windows
./æ¯æ—¥æ›´æ–°.bat

# Linux
./æ¯æ—¥æ›´æ–°.sh
```

è‡ªåŠ¨æ‰§è¡Œï¼š
1. ä» 9 ä¸ªå¹³å°æŠ“å–æœ€æ–°ä»·æ ¼
2. ç»Ÿä¸€æ ¼å¼å¹¶é€‰æ‹©æœ€ä½ä»·
3. è¿è¡Œç§‘å­¦ç‰ˆè®¡ç®—
4. ç”Ÿæˆ 5 ä»½æ ¸å¿ƒæŠ¥å‘Š

### æ‰‹åŠ¨è¿è¡Œï¼ˆé€æ­¥æ‰§è¡Œï¼‰

```bash
# æ­¥éª¤ 1: æŠ“å–ä»·æ ¼ï¼ˆå…¨å¹³å°ï¼‰
python fetch_prices_with_steamdt.py --items-csv data/cs2_case_items_full.csv --out prices_all.csv --platform all

# æ­¥éª¤ 2: ç»Ÿä¸€ä»·æ ¼æ ¼å¼
python unify_prices.py

# æ­¥éª¤ 3: ç§‘å­¦ç‰ˆè®¡ç®—
python calculate_scientific_plus.py --input data/prices_with_exterior.csv --meta data/skins_meta_complete.csv --out-csv output/ç§‘å­¦ç‰ˆ_ç›ˆåˆ©TOP100.csv
```

## ğŸ“Š æ ¸å¿ƒåŠŸèƒ½

### 1. ç§‘å­¦ç‰ˆç‚¼é‡‘è®¡ç®—
- âœ… åŸºäºæµ®æ¼‚ä¼ å¯¼çš„ç²¾ç¡®æœŸæœ›è®¡ç®—
- âœ… è€ƒè™‘å¤–è§‚è½æ¡£çš„å®é™…æ”¶ç›Š
- âœ… æ”¯æŒ StatTrakâ„¢ åˆ†ç¦»è®¡ç®—
- âœ… MIP ä¼˜åŒ–ç®—æ³•ï¼ˆæœ€ä¼˜ç£¨æŸé€‰æ‹©ï¼‰

### 2. å¤šå¹³å°ä»·æ ¼å¯¹æ¯”
æ”¯æŒ 9 ä¸ªå¹³å°ä»·æ ¼æŠ“å–ï¼š
- Steam ç¤¾åŒºå¸‚åœº
- BUFF
- æ‚ æ‚ æœ‰å“ (YouPin)
- C5Game
- IGXE
- UU898
- å…¶ä»–å¹³å°...

### 3. æ™ºèƒ½æŠ¥å‘Šç”Ÿæˆ
è‡ªåŠ¨ç”Ÿæˆ 5 ä»½æ ¸å¿ƒæŠ¥å‘Šï¼š
1. **æ¯ç®±æ¯ç‰©å“å„å¤–è§‚çš„æœ€ä¼˜ä¸‹çº§** - æœ€é«˜ç£¨æŸâ†’æœ€ä½ä»·
2. **æ­£æ”¶ç›Š TOP100ï¼ˆæŒ‰åˆ©æ¶¦ï¼‰** - ç»å¯¹æ”¶ç›Šæ’è¡Œ
3. **è´Ÿæ”¶ç›Š TOP100ï¼ˆæŒ‰åˆ©æ¶¦ï¼‰** - é£é™©è­¦ç¤º
4. **æ­£æ”¶ç›Š TOP100ï¼ˆæŒ‰ ROIï¼‰** - æŠ•èµ„å›æŠ¥ç‡æ’è¡Œ
5. **è´Ÿæ”¶ç›Š TOP100ï¼ˆæŒ‰ ROIï¼‰** - ç›¸å¯¹äºæŸç‡æ’è¡Œ

## ğŸ”§ ç¯å¢ƒé…ç½®

### å¿…éœ€ä¾èµ–
```bash
pip install pandas numpy ortools requests tqdm python-dotenv
```

### ç¯å¢ƒå˜é‡
åˆ›å»º `.env` æ–‡ä»¶ï¼š
```env
STEAMDT_API_KEY=your_api_key_here
```

## ğŸ“– ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: æ¯æ—¥æŠ•èµ„åˆ†æ
è¿è¡Œ `æ¯æ—¥æ›´æ–°.bat`ï¼ŒæŸ¥çœ‹ `output/` æ–‡ä»¶å¤¹ä¸­çš„æŠ¥å‘Š

### åœºæ™¯ 2: ç‰¹å®šå¤–è§‚è®¡ç®—
```bash
python calculate_scientific_plus.py \
  --input data/prices_with_exterior.csv \
  --meta data/skins_meta_complete.csv \
  --target-exterior FN \
  --out-csv output/FNä¸“é¡¹.csv
```

### åœºæ™¯ 3: StatTrakâ„¢ ä¸“é¡¹åˆ†æ
```bash
python calculate_scientific_plus.py \
  --input data/prices_with_exterior.csv \
  --meta data/skins_meta_complete.csv \
  --split-st \
  --out-csv output/ç§‘å­¦ç‰ˆ_ç›ˆåˆ©TOP100.csv
```

## ğŸ› ï¸ ç»´æŠ¤å·¥å…·

### æ¸¸æˆæ›´æ–°å
```bash
# 1. æ›´æ–°æµ®æ¼‚å…ƒæ•°æ®
python tools/fetch_float_from_github.py

# 2. æ›´æ–°ä¸­æ–‡åç§°æ˜ å°„ï¼ˆå¦‚éœ€ä»ä¸­æ–‡å¹³å°æŸ¥è¯¢ï¼‰
python tools/generate_cn_name_mapping.py --source steam
```

### é¦–æ¬¡éƒ¨ç½²
```bash
# 1. è·å–æµ®æ¼‚å…ƒæ•°æ®
python tools/fetch_float_from_github.py

# 2. ç”Ÿæˆä¸­æ–‡æ˜ å°„è¡¨
python tools/generate_cn_name_mapping.py --source manual

# 3. è¿è¡Œæ¯æ—¥æ›´æ–°
./æ¯æ—¥æ›´æ–°.bat
```

## ğŸ“ æ ¸å¿ƒç®—æ³•

### æµ®æ¼‚ä¼ å¯¼
1. è¾“å…¥æµ®æ¼‚ `f_in` æŒ‰è¾“å…¥çš®è‚¤åŒºé—´ `[fmin_in, fmax_in]` å½’ä¸€åŒ–ä¸º `~f`
2. `~f` æ˜ å°„åˆ°ç›®æ ‡çš®è‚¤åŒºé—´ `[fmin_out, fmax_out]` å¾—åˆ° `f_out`
3. æ ¹æ® `f_out` åˆ¤å®šå¤–è§‚ï¼ˆFN/MW/FT/WW/BSï¼‰
4. å–å¯¹åº”å¤–è§‚ä»·æ ¼è®¡ç®—æœŸæœ›

### æœŸæœ›ä»·å€¼
```
å•ä»¶ä»·å€¼ = EV_out * (1 - sell_fee) / K
ä¹°å…¥æˆæœ¬ = price * (1 + buy_fee)
åˆ©æ¶¦ = å•ä»¶ä»·å€¼ - ä¹°å…¥æˆæœ¬
ROI = åˆ©æ¶¦ / ä¹°å…¥æˆæœ¬
```

### MIP ä¼˜åŒ–
ä½¿ç”¨ CP-SAT æ±‚è§£å™¨ä¼˜åŒ–æµ®æ¼‚é€‰æ‹©ï¼Œæœ€å¤§åŒ–ï¼š
```
Î£(x[i,j] * benefit[i,j]) - Î£(y[i] * cost[i])
```

## ğŸŒŸ ç‰¹è‰²åŠŸèƒ½

- âœ… **é›¶ä¾µå…¥å¼æŠ¥å‘Š** - è‡ªåŠ¨ç”Ÿæˆå›ºå®šæ ¼å¼æŠ¥å‘Š
- âœ… **å¤šæ•°æ®æºæ”¯æŒ** - è‡ªåŠ¨å›é€€åˆ°æœ¬åœ°ä»·æ ¼
- âœ… **æ™ºèƒ½æº¢ä»·æ¨¡å‹** - å¤„ç†ç¼ºå¤±ä»·æ ¼æ•°æ®
- âœ… **StatTrakâ„¢ åˆ†ç¦»** - ç‹¬ç«‹åˆ†ææ™®é€š/ST ç‰©å“
- âœ… **å¤–è§‚å…¨è¦†ç›–** - æ¯ä¸ªç‰©å“çš„æ‰€æœ‰å¯è¾¾å¤–è§‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œä¸ªäººä½¿ç”¨ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**æœ€åæ›´æ–°**: 2025å¹´11æœˆ17æ—¥
